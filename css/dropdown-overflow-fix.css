/**
 * EMERGENCY DROPDOWN OVERFLOW FIX
 * This file specifically addresses the mobile dropdown overflow issue
 * Load this AFTER Bootstrap CSS and layout-standardization.css
 */

/* CRITICAL: Prevent horizontal overflow on mobile devices */
@media (max-width: 767px) {
    /* Force body and html to prevent horizontal scroll */
    html, body {
        overflow-x: hidden !important;
        max-width: 100vw !important;
        box-sizing: border-box !important;
    }
    
    /* Force all containers to prevent overflow */
    .container-fluid,
    .container,
    .main-content,
    .row,
    .col,
    [class*="col-"] {
        overflow-x: hidden !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
    
    /* CRITICAL: Fix select element overflow */
    select,
    .form-select,
    select.form-select,
    .form-control {
        max-width: 100% !important;
        width: 100% !important;
        box-sizing: border-box !important;
        margin: 0 !important;
        padding-left: 0.75rem !important;
        padding-right: 2.25rem !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        white-space: nowrap !important;
    }
    
    /* Force select options to be contained */
    select option,
    .form-select option {
        max-width: 100% !important;
        white-space: normal !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        padding: 0.375rem 0.75rem !important;
    }
    
    /* Ensure form groups don't cause overflow */
    .form-group,
    .mb-3,
    .form-floating,
    .input-group {
        max-width: 100% !important;
        overflow: hidden !important;
        box-sizing: border-box !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
    
    /* Force dropdown menus to stay within bounds */
    .dropdown-menu {
        max-width: calc(100vw - 32px) !important;
        left: 0 !important;
        right: auto !important;
        transform: none !important;
        margin: 0 !important;
        box-sizing: border-box !important;
        overflow-x: hidden !important;
        word-wrap: break-word !important;
    }
    
    /* Ensure dropdown items wrap text */
    .dropdown-item {
        white-space: normal !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    /* Force container padding to be respected */
    .container-fluid {
        padding-left: 16px !important;
        padding-right: 16px !important;
        max-width: 100vw !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
    }
    
    /* Prevent any form element from causing overflow */
    form {
        max-width: 100% !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
    }
    
    /* Ensure labels don't cause overflow */
    .form-label,
    label {
        max-width: 100% !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        box-sizing: border-box !important;
    }
}

/* Tablet-specific fixes */
@media (min-width: 768px) and (max-width: 991px) {
    select,
    .form-select,
    select.form-select {
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    .container-fluid {
        padding-left: 20px !important;
        padding-right: 20px !important;
        overflow-x: hidden !important;
    }
}

/* Small desktop fixes */
@media (min-width: 992px) and (max-width: 1199px) {
    select,
    .form-select,
    select.form-select {
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    .container-fluid {
        padding-left: 24px !important;
        padding-right: 24px !important;
        overflow-x: hidden !important;
    }
}

/* Universal box-sizing fix */
* {
    box-sizing: border-box !important;
}

/* Prevent any element from causing horizontal scroll on mobile */
@media (max-width: 767px) {
    *:not(.table):not(.table *) {
        max-width: 100% !important;
    }
    
    /* Special handling for tables */
    .table-responsive {
        overflow-x: auto !important;
        max-width: 100% !important;
        -webkit-overflow-scrolling: touch !important;
    }
    
    .table {
        min-width: 100% !important;
        white-space: nowrap !important;
    }
}